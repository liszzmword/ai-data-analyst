# 📓 AI 데이터 분석 노트 (NotebookLM 스타일)

**파일 업로드 → AI 자동 분석 → 인사이트 제공**

Google Gemini 2.5 Pro 기반 데이터 분석 챗봇

**실제 데이터를 Pandas로 계산하여 정확한 인사이트 제공**

---

## ✨ 주요 기능

### 📂 다양한 파일 형식 지원
- **CSV/Excel**: 자동 인코딩 감지, 데이터 요약
- **이미지** (PNG/JPG): 차트/그래프 이미지 분석
- **PDF**: 문서 업로드

### 🤖 AI 자동 분석
- Google Gemini 2.5 Pro 사용
- **Pandas 기반 실시간 계산** (상위 N개, 합계, 평균 등)
- 업로드된 데이터 자동 분석
- 질문 기반 맞춤 답변
- **실제 데이터만 사용** (할루시네이션 방지)

### 💡 인사이트 제공
- 데이터 패턴 발견
- 구체적인 수치 기반 설명
- 의사결정을 위한 제안

### 🖼️ 멀티모달 분석
- 차트/그래프 이미지 해석
- 테이블 + 이미지 종합 분석

---

## 🚀 빠른 시작

### 1. 의존성 설치
```bash
pip install -r requirements.txt
```

### 2. API 키 설정
`config.py` 파일에서:
```python
GOOGLE_API_KEY = "your-api-key-here"
```

### 3. 실행
```bash
streamlit run app.py
```

**http://localhost:8501** 접속

---

## 📖 사용 방법

1. **파일 업로드**: 왼쪽 사이드바에 CSV/Excel/이미지 드래그
2. **질문 입력**: "이 데이터의 주요 특징은?"
3. **AI 답변**: Gemini가 자동 분석 + 인사이트 제공

---

## 💡 예시 질문

- "이 데이터의 주요 특징을 알려줘"
- "매출 상위 10개 항목은?"
- "이 차트가 의미하는 것은?"
- "문제점과 개선점을 찾아줘"
- "전략을 제안해줘"

---

## 🏗️ 파일 구조

```
rag_Test/
├── app.py                # Streamlit UI
├── upload_handler.py     # 파일 처리
├── smart_analyst.py      # AI 분석
├── config.py             # API 설정
├── utils.py              # 유틸리티
└── requirements.txt      # 의존성
```

---

## 🎯 NotebookLM vs 이 프로젝트

| 기능 | NotebookLM | 이 프로젝트 |
|------|-----------|-----------|
| 파일 업로드 | ✅ | ✅ |
| AI 분석 | ✅ | ✅ |
| 차트 분석 | ✅ | ✅ |
| **pandas 계산** | ❌ | ✅ |
| **맞춤 프롬프트** | ❌ | ✅ |
| **로컬 실행** | ❌ | ✅ |

---

**Powered by Google Gemini 2.5 Pro** 🚀

---

## 🔥 최근 개선사항

### v2.1 - 다중 파일 분석 + 온라인 배포 준비 (2026-01-07)
- ✅ **다중 CSV 조인**: 여러 파일을 거래처 기준으로 자동 조인
- ✅ **특정 거래처 분석**: 연도별 추이, 주요 제품 등 상세 분석
- ✅ **전체 데이터 분석**: Top 10 제한 해제 (최대 50개)
- ✅ **NULL 값 처리**: 빈 값 자동 감지 및 처리
- ✅ **보안 강화**: API 키를 환경 변수로 분리 (.env)

### v2.0 - 실제 데이터 기반 분석 (2026-01-07)
- ✅ **Pandas 실시간 계산**: 상위 N개, 합계, 평균 등 자동 계산
- ✅ **자동 타입 변환**: 문자열 숫자(쉼표 포함) → numeric 자동 변환
- ✅ **할루시네이션 방지**: Gemini가 실제 데이터만 사용하도록 프롬프트 강화
- ✅ **코드북 매핑**: CSV 컬럼 코드(A-2, B-1) → 한글명(번호, 거래처) 자동 변환

**Before**: "주식회사 가나다라" 같은 가짜 회사명 생성 ❌
**After**: "주식회사 에이치엠티" 같은 실제 데이터 기반 답변 ✅

---

## 🌐 온라인 배포

이 프로젝트는 **온라인 배포가 가능**합니다!

### 배포 옵션
- 🥇 **Streamlit Community Cloud** (무료, 추천)
- 🥈 **Hugging Face Spaces** (무료, 비공개 가능)
- 🥉 **자체 서버** (VPS/AWS/GCP)

### CSV 파일 업로드
- ✅ 온라인 배포 후에도 **파일 업로드 가능**
- ✅ 브라우저에서 직접 업로드
- ✅ 사용자별 세션 분리

### 보안
- ✅ API 키: 환경 변수로 안전하게 관리
- ✅ 업로드 파일: 세션 메모리에만 임시 저장
- ✅ 자동 삭제: 세션 종료 시

**상세 가이드**: [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) 참고
